<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test de Igualdad</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --success: #059669;
      --danger: #dc2626;
      --ring: rgba(37, 99, 235, 0.25);
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 24px;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
    }
    header.hero {
      text-align: center;
      margin-bottom: 16px;
    }
    .title {
      font-size: 32px;
      font-weight: 800;
      color: var(--primary-dark);
      margin: 0 0 8px;
    }
    .subtitle {
      color: var(--muted);
      margin: 0;
    }
    .controls {
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.06);
      padding: 16px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 12px;
      z-index: 5;
    }
    .controls label { font-weight: 500; }
    select {
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #fff;
      outline: none;
      transition: box-shadow .2s, border-color .2s;
    }
    select:focus { border-color: var(--primary); box-shadow: 0 0 0 4px var(--ring); }

    .btn {
      cursor: pointer;
      border: none;
      border-radius: 10px;
      padding: 12px 18px;
      font-weight: 700;
      transition: transform .15s, background .2s, box-shadow .2s;
      color: #fff;
      background: var(--primary);
      box-shadow: 0 6px 14px rgba(37,99,235,.2);
    }
    .btn:hover { transform: translateY(-1px); background: var(--primary-dark); }
    .btn.secondary { background: #6b7280; }
    .btn.secondary:hover { background: #374151; }
    .btn.success { background: var(--success); }
    .btn.success:hover { background: #047857; }
    .btn.danger { background: var(--danger); }
    .btn.danger:hover { background: #b91c1c; }

    .progress {
      width: 100%;
      height: 10px;
      background: #e5e7eb;
      border-radius: 999px;
      overflow: hidden;
      margin-top: 8px;
    }
    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--primary), #60a5fa);
      transition: width .3s ease;
    }

    .question {
      margin: 14px 0;
      padding: 18px;
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.06);
    }
    .q-head {
      display: flex;
      align-items: baseline;
      gap: 8px;
    }
    .q-num {
      font-weight: 800;
      color: var(--primary-dark);
    }
    .q-text { margin: 0; }

    .options { margin-top: 10px; display: grid; gap: 8px; }
    .option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #e5e7eb;
      background: #fff;
      transition: background .15s, border-color .15s, box-shadow .15s;
      cursor: pointer;
    }
    .option input { transform: scale(1.2); }
    .option:hover { background: #f9fafb; border-color: #d1d5db; }
    .option.is-selected { box-shadow: 0 0 0 4px var(--ring); border-color: var(--primary); }

    .justification {
      margin-top: 10px; color: var(--muted);
    }
    .correct { color: var(--success); font-weight: 700; }
    .incorrect { color: var(--danger); font-weight: 700; }

    .option.correct-option {
      border-color: rgba(5,150,105,.4);
      background: #ecfdf5;
    }
    .option.wrong-option {
      border-color: rgba(220,38,38,.4);
      background: #fef2f2;
    }

    .result-card {
      margin: 18px 0;
      padding: 16px;
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.06);
      text-align: center;
    }
    .score {
      font-size: 22px;
      font-weight: 800;
      margin: 8px 0;
    }
    .muted { color: var(--muted); }
    footer { text-align: center; margin-top: 24px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="container">
    <header class="hero">
      <h1 class="title">Test de Igualdad</h1>
      <p class="subtitle">Selecciona cuÃ¡ntas preguntas quieres y pulsa <strong>Comenzar</strong>.</p>
    </header>

    <div class="controls">
      <label for="numPreguntas">NÃºmero de preguntas:</label>
      <select id="numPreguntas">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
        <option value="40">40</option>
        <option value="50" selected>50</option>
      </select>
      <button class="btn" type="button" onclick="cargarTest()">Comenzar</button>
      <button class="btn secondary" type="button" onclick="reiniciarTest()">Reiniciar</button>
      <div class="progress" style="flex-basis: 100%;">
        <div class="progress-bar" id="progressBar"></div>
      </div>
    </div>

    <form id="testForm"></form>

    <div id="testResult"></div>
    <footer>Â© Test de prÃ¡ctica â€” Igualdad</footer>
  </div>

<script>
const preguntasBanco = [
  {
  pregunta: "El artÃ­culo 14 de la ConstituciÃ³n EspaÃ±ola establece:",
  opciones: ["a) La igualdad de todos ante la ley sin discriminaciÃ³n.", "b) La obligaciÃ³n de los poderes pÃºblicos de remover obstÃ¡culos.", "c) La igualdad formal y material al mismo tiempo.", "d) Que la igualdad es solo un principio programÃ¡tico, no un derecho fundamental."],
  correcta: "a) La igualdad de todos ante la ley sin discriminaciÃ³n.",
  justificacion: "El artÃ­culo 14 CE recoge la igualdad ante la ley y la no discriminaciÃ³n como derecho fundamental."
},
{
  pregunta: "Selecciona la opciÃ³n incorrecta sobre la igualdad formal:",
  opciones: ["a) EstÃ¡ recogida en normas jurÃ­dicas.", "b) ProhÃ­be la discriminaciÃ³n legal explÃ­cita.", "c) Garantiza igualdad de trato en la aplicaciÃ³n de la ley.", "d) Supone polÃ­ticas pÃºblicas para corregir desigualdades reales."],
  correcta: "d) Supone polÃ­ticas pÃºblicas para corregir desigualdades reales.",
  justificacion: "La igualdad formal se refiere a la igualdad legal, no a la material. Las polÃ­ticas pÃºblicas son parte de la igualdad sustantiva (art. 9.2 CE)."
},
{
  pregunta: "La igualdad material o sustantiva se relaciona con:",
  opciones: ["a) El artÃ­culo 14 CE.", "b) El artÃ­culo 9.2 CE.", "c) La DeclaraciÃ³n de Derechos Humanos.", "d) El principio de legalidad."],
  correcta: "b) El artÃ­culo 9.2 CE.",
  justificacion: "El art. 9.2 CE obliga a los poderes pÃºblicos a promover condiciones para la igualdad real y efectiva."
},
{
  pregunta: "DiscriminaciÃ³n indirecta significa:",
  opciones: ["a) Un trato desigual evidente.", "b) Una norma aparentemente neutra que perjudica a un grupo.", "c) Una discriminaciÃ³n justificada por la tradiciÃ³n.", "d) La preferencia legal a un colectivo vulnerable."],
  correcta: "b) Una norma aparentemente neutra que perjudica a un grupo.",
  justificacion: "La discriminaciÃ³n indirecta se da cuando una medida neutral afecta negativamente a un grupo (ej. estatura mÃ­nima)."
},
{
  pregunta: "Selecciona la afirmaciÃ³n falsa sobre la discriminaciÃ³n directa:",
  opciones: ["a) Es un trato desigual claro y explÃ­cito.", "b) EstÃ¡ prohibida en la ConstituciÃ³n EspaÃ±ola.", "c) Puede justificarse si existe interÃ©s general.", "d) Incluye motivos como raza, sexo o religiÃ³n."],
  correcta: "c) Puede justificarse si existe interÃ©s general.",
  justificacion: "La discriminaciÃ³n directa estÃ¡ prohibida siempre, sin excepciones en el interÃ©s general."
},
{
  pregunta: "El artÃ­culo 9.2 de la CE obliga a los poderes pÃºblicos a:",
  opciones: ["a) Promover las condiciones para que la libertad e igualdad sean reales y efectivas.", "b) Garantizar solo la igualdad formal.", "c) No intervenir en desigualdades sociales.", "d) Limitarse a prohibir discriminaciones."],
  correcta: "a) Promover las condiciones para que la libertad e igualdad sean reales y efectivas.",
  justificacion: "El art. 9.2 CE impone un mandato de actuaciÃ³n activa para garantizar igualdad sustantiva."
},
{
  pregunta: "Selecciona la opciÃ³n correcta sobre las acciones positivas:",
  opciones: ["a) Se consideran siempre discriminatorias.", "b) Son medidas temporales para corregir desigualdades.", "c) No pueden aplicarse en el Ã¡mbito laboral.", "d) EstÃ¡n prohibidas por el artÃ­culo 14 CE."],
  correcta: "b) Son medidas temporales para corregir desigualdades.",
  justificacion: "La LO 3/2007 permite acciones positivas siempre que sean proporcionales para alcanzar igualdad real."
},
{
  pregunta: "Ejemplo de discriminaciÃ³n indirecta serÃ­a:",
  opciones: ["a) Prohibir la entrada a mujeres en un local.", "b) Negar un ascenso por estar embarazada.", "c) Exigir una estatura mÃ­nima innecesaria en un trabajo.", "d) Insultar a alguien por su religiÃ³n."],
  correcta: "c) Exigir una estatura mÃ­nima innecesaria en un trabajo.",
  justificacion: "Es una norma neutral que afecta mÃ¡s a mujeres, sin necesidad objetiva."
},
{
  pregunta: "La DeclaraciÃ³n Universal de Derechos Humanos establece en su artÃ­culo 1 y 2:",
  opciones: ["a) Que todos los seres humanos nacen libres e iguales en dignidad y derechos.", "b) Que solo algunos Estados deben garantizar igualdad.", "c) Que la igualdad se limita al Ã¡mbito laboral.", "d) Que la igualdad se reconoce pero no se exige."],
  correcta: "a) Que todos los seres humanos nacen libres e iguales en dignidad y derechos.",
  justificacion: "La DUDH de 1948 proclama la igualdad y dignidad de todos sin distinciÃ³n."
},
{
  pregunta: "El Convenio Europeo de Derechos Humanos, artÃ­culo 14, regula:",
  opciones: ["a) Derecho a la vida.", "b) Libertad de expresiÃ³n.", "c) No discriminaciÃ³n en el disfrute de los derechos.", "d) La aboliciÃ³n de la pena de muerte."],
  correcta: "c) No discriminaciÃ³n en el disfrute de los derechos.",
  justificacion: "El art. 14 CEDH prohÃ­be discriminaciÃ³n en el ejercicio de los derechos reconocidos en el Convenio."
},

]; 

let totalPreguntasRenderizadas = 0;

function barajar(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function setProgress(current, total) {
  const bar = document.getElementById('progressBar');
  const pct = total > 0 ? Math.round((current / total) * 100) : 0;
  bar.style.width = pct + '%';
  bar.title = pct + '%';
}

function cargarTest() {
  const seleccionadas = [...preguntasBanco];
  barajar(seleccionadas);
  const num = parseInt(document.getElementById("numPreguntas").value);
  const seleccion = seleccionadas.slice(0, num);

  const testForm = document.getElementById("testForm");
  const result = document.getElementById("testResult");
  testForm.innerHTML = '';
  result.innerHTML = '';
  totalPreguntasRenderizadas = seleccion.length;
  setProgress(0, totalPreguntasRenderizadas);

  seleccion.forEach((preg, index) => {
    const id = `q${index}`;
    const opciones = [...preg.opciones];
    barajar(opciones);
    const opcionesHTML = opciones.map(op => `
      <label class="option">
        <input type="radio" name="${id}" value="${op}" data-correcta="${preg.correcta}" data-justificacion="${preg.justificacion}">
        ${op}
      </label>
    `).join('');

    const card = document.createElement('div');
    card.className = 'question';
    card.innerHTML = `
      <div class="q-head">
        <div class="q-num">Pregunta ${index + 1}:</div>
        <p class="q-text">${preg.pregunta}</p>
      </div>
      <div class="options">${opcionesHTML}</div>
      <div class="justification" id="j${id}"></div>
    `;
    testForm.appendChild(card);
  });

  // Botonera inferior
  const actions = document.createElement('div');
  actions.style.textAlign = 'center';
  actions.style.marginTop = '14px';
  actions.innerHTML = '<button class="btn success" type="button" onclick="corregir()">âœ… Enviar</button>';
  testForm.appendChild(actions);

  // SelecciÃ³n visual on click
  testForm.querySelectorAll('.option input').forEach(inp => {
    inp.addEventListener('change', (e) => {
      const group = e.target.name;
      // Quitar selecciÃ³n previa
      testForm.querySelectorAll(`input[name="${group}"]`).forEach(i2 => {
        i2.closest('.option').classList.remove('is-selected');
      });
      e.target.closest('.option').classList.add('is-selected');

      // Progreso (contar cuÃ¡ntas preguntas ya tienen marcada una opciÃ³n)
      const respondidas = new Set();
      testForm.querySelectorAll('.option input:checked').forEach(i3 => respondidas.add(i3.name));
      setProgress(respondidas.size, totalPreguntasRenderizadas);
    });
  });
}

function corregir() {
  const preguntas = document.querySelectorAll('.question');
  let aciertos = 0;

  preguntas.forEach(q => {
    const seleccion = q.querySelector('input[type="radio"]:checked');
    const justDiv = q.querySelector('.justification');

    // Limpiar estilos previos
    q.querySelectorAll('.option').forEach(lbl => {
      lbl.classList.remove('correct-option', 'wrong-option');
    });

    // Marcar siempre la opciÃ³n correcta
    q.querySelectorAll('.option input').forEach(inp => {
      if (inp.value === inp.dataset.correcta) {
        inp.closest('.option').classList.add('correct-option');
      }
    });

    if (seleccion) {
      if (seleccion.value === seleccion.dataset.correcta) {
        aciertos++;
        justDiv.innerHTML = `<span class="correct">âœ” ${seleccion.dataset.justificacion}</span>`;
      } else {
        // SeÃ±alar la opciÃ³n elegida como errÃ³nea
        seleccion.closest('.option').classList.add('wrong-option');
        justDiv.innerHTML = `<span class="incorrect">âœ˜ ${seleccion.dataset.justificacion}</span>`;
      }
    } else {
      justDiv.innerHTML = `<span class="incorrect">âœ˜ No contestada</span>`;
    }
  });

  const result = document.getElementById('testResult');
  const total = preguntas.length;
  const pct = Math.round((aciertos / total) * 100);
  const emoji = pct >= 70 ? "ðŸŽ‰" : (pct >= 50 ? "ðŸ™‚" : "ðŸ’ª");
  result.innerHTML = `
    <div class="result-card">
      <div class="muted">Resultado</div>
      <div class="score">${emoji} ${aciertos} / ${total} (${pct}%)</div>
      <div class="muted">Puedes cambiar tus respuestas y volver a pulsar <strong>Enviar</strong>.</div>
    </div>
  `;
}

function reiniciarTest() {
  document.getElementById('testForm').innerHTML = '';
  document.getElementById('testResult').innerHTML = '';
  setProgress(0, 0);
}
</script>
</body>
</html>
